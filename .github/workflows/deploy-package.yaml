name: Deploy Package Workflow

on:
  workflow_dispatch:
    inputs:
      ENV:
        description: 'Select the Environment to deploy to'
        required: true
        type: environment
      PACKAGE:
        description: 'Add package (defalut to latest)'
        required: false
        type: string
        default: 'latest'

jobs:
  Deployment:
    uses: US-EPA-CAMD/devops/.github/workflows/reusable-release-workflow.yaml@master
    with:
      ENV: ${{ inputs.ENV }}
      VERSION: ${{ inputs.VERSION }}
    secrets:
      CF_ENV_DEPLOYMENT_SVC: ${{ secrets.CF_ENV_DEPLOYMENT_SVC }}
      CF_ENV_DEPLOYMENT_SVC_PWD: ${{ secrets.CF_ENV_DEPLOYMENT_SVC_PWD }}
      ARTIFACTS_STORAGE_ACCESS_KEY_ID: ${{ secrets.ARTIFACTS_STORAGE_ACCESS_KEY_ID }}
      ARTIFACTS_STORAGE_SECRET_ACCESS_KEY: ${{ secrets.ARTIFACTS_STORAGE_SECRET_ACCESS_KEY }}


# FROM RELEASE/V1.0
# name: Deploy Package Workflow

# on:
#   workflow_dispatch:
#     inputs:
#       ENV:
#         description: 'Select the Environment to deploy to'
#         required: true
#         type: environment
#       PACKAGE:
#         description: 'Add package (default to latest)'
#         required: false
#         type: string
#         default: 'latest'

# jobs:
#   Deployment:
#     steps:
#       - uses: US-EPA-CAMD/devops/.github/workflows/reusable-release-workflow.yaml@master
#         with:
#           ENV: ${{ inputs.ENV }}
#           PACKAGE: ${{ inputs.PACKAGE }}
#       - name: Deployment
#         run: |
#           devops/scripts/deploy.sh